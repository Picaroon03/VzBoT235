[include mainsail.cfg]
[include Exclude_Object.cfg]
[include Start_Stop.cfg]
[include Macro.cfg]
[include Speed.cfg]
[display_status]
[exclude_object]
[virtual_sdcard]
path: ~/printer_data/gcodes
[pause_resume]
recover_velocity: 350

[gcode_arcs]
resolution: 0.1

#######################

[printer]
kinematics: corexy
max_velocity: 2500
max_accel: 5000
#max_accel_to_decel: 5000
max_z_velocity: 10
max_z_accel: 1000
square_corner_velocity: 5

########################

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_220036001150535556323420-if00
#restart_method: command

[mcu rpi]
serial: /tmp/klipper_host_mcu

[temperature_sensor Octopus PRO]
sensor_type: temperature_mcu

[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

########################

## motor 0
[stepper_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
rotation_distance: 40
microsteps: 16
full_steps_per_rotation: 200  
endstop_pin: PG6
position_endstop: 0
position_min: 0
position_max: 235
homing_speed: 60
homing_retract_dist: 0

[tmc2209 stepper_x]
uart_pin: PC4
interpolate: True
run_current: 1
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 999999

## motor 2_1
[stepper_x1]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
rotation_distance: 40
microsteps: 16
full_steps_per_rotation: 200

[tmc2209 stepper_x1]
uart_pin: PC6
interpolate: true
run_current: 1
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 999999

## motor 1
[stepper_y]
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
rotation_distance: 40
microsteps: 16
full_steps_per_rotation: 200  
endstop_pin: PG9
position_endstop: 235
position_min: 20
position_max: 235
homing_speed: 60
homing_retract_dist: 0

[tmc2209 stepper_y]
uart_pin: PD11
interpolate: True
run_current: 1
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 999999

## motor 3
[stepper_y1]
step_pin: PG4
dir_pin: !PC1
enable_pin: !PA0
rotation_distance: 40
microsteps: 16
full_steps_per_rotation: 200

[tmc2209 stepper_y1]
uart_pin: PC7
interpolate: true
run_current: 1
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 999999

## motor 4
[stepper_z]
step_pin: PF9
dir_pin: PF10
enable_pin: !PG2
microsteps: 32
rotation_distance: 2
position_max: 200
position_min: -2
full_steps_per_rotation: 200
homing_retract_dist: 0
homing_positive_dir: false
homing_speed: 5.0
second_homing_speed: 2.5
endstop_pin: probe:z_virtual_endstop 

[tmc2209 stepper_z]
uart_pin: PF2
interpolate: false
run_current: 0.8
hold_current: 0.8
sense_resistor: 0.110

[extruder]
step_pin: PC13
dir_pin: PF0
enable_pin: !PF1
microsteps: 16
full_steps_per_rotation: 200
rotation_distance: 4.637
nozzle_diameter: 0.400
filament_diameter: 1.750
max_extrude_only_distance: 500
max_extrude_only_velocity: 120
max_extrude_cross_section: 5
heater_pin: PB11
sensor_pin: PF4
sensor_type: ATC Semitec 104NT-4-R025H42G
min_temp: 10
max_temp: 350
max_power: 1.0
min_extrude_temp: 200

[tmc2209 extruder]
uart_pin: PE4
interpolate: true
run_current: 0.8
hold_current: 0.4
sense_resistor: 0.110

[heater_bed]
heater_pin: PA1
sensor_type: Generic 3950
sensor_pin: PF3
min_temp: 0
max_temp: 125

########################

[heater_fan hotend_fan]
pin: PA8
kick_start_time: 0.01
max_power: 1.0
heater: extruder
heater_temp: 50.0

[fan]
pin: PB6
enable_pin: PA3
hardware_pwm: True
cycle_time: 0.00004
off_below: 0.12
kick_start_time: 0.01

[controller_fan heatsink]
pin: PE5
kick_start_time: 0.01
stepper: stepper_x

[controller_fan heatsink 2]
pin: PD12
kick_start_time: 0.01
stepper: stepper_y


[idle_timeout]
timeout: 1800
gcode =
  {% if printer.pause_resume.is_paused %}
    M104 S0
  {% else %}
    TURN_OFF_HEATERS
    #M84
  {% endif %}

########################

[mcu scanner]
serial: /dev/serial/by-id/usb-Cartographer_614e_06001A000243303459323220-if00

[scanner]
mcu: scanner            
x_offset: 0                          
y_offset: 0                        
backlash_comp: -0.00275
sensor: cartographer
sensor_alt: carto     
mesh_runs: 2

[bed_mesh]
zero_reference_position: 117, 117 
speed: 125
horizontal_move_z: 5
mesh_min: 15, 20
mesh_max: 205, 195
probe_count: 20, 20
algorithm: bicubic

[temperature_sensor Cartographer_MCU]
sensor_type: temperature_mcu
sensor_mcu: scanner
min_temp: 0
max_temp: 105

[safe_z_home]
home_xy_position: 117.5, 117.5
z_hop: 10

########################

### Input Shaper ###  

#[include adxl345.cfg]  
[input_shaper]  
#shaper_type_x = mzv  
#shaper_freq_x = 0  
#shaper_type_y = mzv  
#shaper_freq_y = 0

########################

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [scanner model default]
#*# model_coef = 1.5876258222106567,
#*# 	1.844126309790639,
#*# 	0.7254165591744959,
#*# 	0.5259963254637844,
#*# 	0.08800309965539643,
#*# 	-0.5039891348566371,
#*# 	0.31607575070922556,
#*# 	1.0622586338889997,
#*# 	-0.067101205704619,
#*# 	-0.47744815081475533
#*# model_domain = 3.2365436189012486e-07,3.3035950595683346e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 57.490131
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.0.0
#*#
#*# [scanner]
#*# mode = touch
#*# scanner_touch_threshold = 750
#*# scanner_touch_speed = 3
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 19.099
#*# pid_ki = 1.355
#*# pid_kd = 67.323
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.148814, -0.143135, -0.135827, -0.124057, -0.106271, -0.092316, -0.080875, -0.067812, -0.056118, -0.047527, -0.040436, -0.045912, -0.053926, -0.055970, -0.057970, -0.049769, -0.033495, -0.014569, 0.005843, 0.024853
#*# 	-0.133737, -0.132251, -0.126783, -0.113434, -0.098767, -0.090104, -0.084896, -0.071038, -0.055736, -0.045810, -0.040768, -0.042953, -0.047598, -0.051779, -0.052291, -0.042816, -0.024248, -0.007408, 0.009503, 0.029143
#*# 	-0.119816, -0.120140, -0.113217, -0.103548, -0.090242, -0.085625, -0.080883, -0.066667, -0.051826, -0.041617, -0.031735, -0.031918, -0.039260, -0.042432, -0.042552, -0.029991, -0.014445, 0.000290, 0.018442, 0.038883
#*# 	-0.102327, -0.106902, -0.103603, -0.093597, -0.082702, -0.079482, -0.075418, -0.060105, -0.045434, -0.039378, -0.020539, -0.023439, -0.036152, -0.036685, -0.033145, -0.023344, -0.007854, 0.006437, 0.023292, 0.043448
#*# 	-0.090462, -0.094341, -0.095215, -0.087440, -0.077750, -0.074164, -0.068434, -0.055645, -0.042638, -0.029710, -0.019407, -0.020089, -0.028942, -0.029460, -0.026881, -0.014540, -0.000190, 0.013940, 0.031817, 0.051233
#*# 	-0.068138, -0.080175, -0.084339, -0.082553, -0.075116, -0.069211, -0.065698, -0.051655, -0.039726, -0.025800, -0.017321, -0.022132, -0.029183, -0.027976, -0.026552, -0.012287, 0.005465, 0.020286, 0.035987, 0.056532
#*# 	-0.054476, -0.066539, -0.074633, -0.074603, -0.070590, -0.065893, -0.061600, -0.047032, -0.034303, -0.024045, -0.017370, -0.018562, -0.025160, -0.024118, -0.020639, -0.007510, 0.012429, 0.027890, 0.044395, 0.065839
#*# 	-0.039051, -0.052782, -0.063137, -0.066508, -0.065986, -0.063290, -0.055154, -0.040187, -0.032536, -0.026533, -0.017149, -0.017755, -0.026415, -0.025101, -0.017800, -0.001762, 0.016987, 0.032587, 0.050526, 0.070094
#*# 	-0.020728, -0.036336, -0.049372, -0.057144, -0.058080, -0.052775, -0.045322, -0.030630, -0.023820, -0.019846, -0.012628, -0.014302, -0.023204, -0.023367, -0.016556, 0.001409, 0.020109, 0.035686, 0.055136, 0.076315
#*# 	-0.008228, -0.025151, -0.042188, -0.050336, -0.046190, -0.042593, -0.036915, -0.024126, -0.014635, -0.007841, -0.003573, -0.010899, -0.016721, -0.016840, -0.010974, 0.004926, 0.026545, 0.041692, 0.059748, 0.080765
#*# 	-0.001866, -0.017816, -0.036183, -0.042727, -0.039400, -0.033157, -0.029771, -0.017088, -0.007858, -0.000296, 0.002991, -0.006877, -0.014765, -0.017257, -0.012612, 0.004991, 0.026358, 0.044686, 0.061314, 0.081622
#*# 	-0.001136, -0.018483, -0.034975, -0.039371, -0.036125, -0.032848, -0.023977, -0.010958, -0.001380, 0.004812, 0.009395, 0.001285, -0.011167, -0.017318, -0.012184, 0.006007, 0.024738, 0.040925, 0.059594, 0.081232
#*# 	-0.007093, -0.022310, -0.036173, -0.041554, -0.036367, -0.032942, -0.023594, -0.007989, -0.000073, 0.007850, 0.013125, 0.003732, -0.013837, -0.017657, -0.011768, 0.004063, 0.020098, 0.034710, 0.053239, 0.074826
#*# 	-0.017361, -0.032951, -0.045337, -0.048955, -0.042304, -0.033366, -0.025781, -0.011704, -0.001698, 0.004138, 0.010407, -0.000040, -0.014194, -0.020270, -0.020554, -0.006724, 0.008003, 0.022628, 0.038534, 0.059373
#*# 	-0.028882, -0.042610, -0.053622, -0.054733, -0.045398, -0.036191, -0.029693, -0.014346, -0.004718, 0.002401, 0.003336, -0.006343, -0.018598, -0.020554, -0.024469, -0.014316, 0.000591, 0.012566, 0.026239, 0.047696
#*# 	-0.046172, -0.058833, -0.065504, -0.062171, -0.051898, -0.045630, -0.035992, -0.021990, -0.014160, -0.009546, -0.008191, -0.015677, -0.028114, -0.036159, -0.038507, -0.026700, -0.017230, -0.007347, 0.006835, 0.029179
#*# 	-0.061614, -0.071476, -0.074802, -0.068742, -0.060808, -0.051248, -0.040980, -0.026750, -0.022003, -0.020113, -0.015522, -0.021251, -0.036145, -0.043378, -0.042878, -0.035842, -0.028126, -0.020467, -0.004952, 0.015527
#*# 	-0.074140, -0.079405, -0.080720, -0.077822, -0.067320, -0.058112, -0.046821, -0.033163, -0.026536, -0.024786, -0.023366, -0.026830, -0.039388, -0.042744, -0.045800, -0.040324, -0.035752, -0.026828, -0.012711, 0.004905
#*# 	-0.075826, -0.081020, -0.085552, -0.081462, -0.069023, -0.058785, -0.048279, -0.036563, -0.028332, -0.025075, -0.025143, -0.029752, -0.036107, -0.039483, -0.044612, -0.041533, -0.032844, -0.026380, -0.015040, 0.002696
#*# 	-0.071466, -0.077766, -0.083310, -0.077830, -0.065675, -0.055430, -0.045816, -0.033050, -0.026343, -0.021156, -0.018121, -0.020487, -0.029728, -0.032738, -0.038808, -0.032952, -0.027629, -0.020445, -0.007854, 0.009971
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 15.0
#*# max_x = 205.0
#*# min_y = 20.0
#*# max_y = 195.0
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 115.6
#*# shaper_type_y = zv
#*# shaper_freq_y = 78.6
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 24.664
#*# pid_ki = 0.618
#*# pid_kd = 246.020
